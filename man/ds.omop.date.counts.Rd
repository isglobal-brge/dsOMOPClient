% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/exploration.R
\name{ds.omop.date.counts}
\alias{ds.omop.date.counts}
\title{Get record counts by time period}
\usage{
ds.omop.date.counts(
  table,
  date_col = NULL,
  granularity = "year",
  cohort_table = NULL,
  window = NULL,
  scope = c("per_site", "pooled"),
  pooling_policy = "strict",
  symbol = "omop",
  conns = NULL,
  execute = TRUE
)
}
\arguments{
\item{table}{Character; the CDM table name (e.g.,
\code{"condition_occurrence"}, \code{"drug_exposure"}).}

\item{date_col}{Character; the date column to aggregate by, or NULL
for automatic detection based on the table's standard date column
(default: NULL).}

\item{granularity}{Character; the time granularity for aggregation:
\code{"year"} (default), \code{"quarter"}, or \code{"month"}.}

\item{cohort_table}{Character; name of a server-side cohort temp table
for filtering, or NULL (default: NULL).}

\item{window}{List with \code{start}/\code{end} date strings for
temporal filtering, or NULL (default: NULL).}

\item{scope}{Character; \code{"per_site"} (default) or \code{"pooled"}.}

\item{pooling_policy}{Character; \code{"strict"} (default) or
\code{"pooled_only_ok"}.}

\item{symbol}{Character; the session symbol (default: \code{"omop"}).}

\item{conns}{DSI connection object(s) or NULL to use the session default.}

\item{execute}{Logical; if \code{FALSE}, return a dry-run result
containing only the generated call code (default: \code{TRUE}).}
}
\value{
A \code{dsomop_result} object with \code{$per_site} (named list
  of data frames with columns \code{period} and \code{count_value}),
  \code{$pooled} (combined counts when pooled), and \code{$meta}.
}
\description{
Aggregates records in an OMOP CDM table by time period (year, quarter,
or month) and returns disclosure-safe counts. The date column is
auto-detected from the table schema if not specified. This is useful
for understanding temporal trends in data coverage and identifying
gaps or spikes in data collection.
}
\examples{
\dontrun{
monthly <- ds.omop.date.counts("condition_occurrence",
                                granularity = "month",
                                scope = "pooled")
monthly$pooled
}
}
